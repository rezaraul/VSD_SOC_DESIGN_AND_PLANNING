
# Day 1
OpenLane is an open-source flow automation tool designed to facilitate the design and implementation of digital integrated circuits. Developed by Efabless in collaboration with the open-source hardware community, OpenLane integrates various open-source tools into a single flow for ASIC design.

OpenLane is already installed on the Ubuntu system, which is running on a virtual machine. All relevant files are located in the "work" folder on the desktop.

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/1.JPG)

We should perform our tasks in the `openlane_working_dir folder`, located at `/Desktop/work/tools/openlane_working_dir`. This directory contains two subfolders: `openlane` and `pdks`. The `pdk` folder contains the SKYwater130 PDK, which OpenLane is built around. Additionally, OpenLane can utilize other PDKs to design digital integrated circuits. We perform our tasks inside the `openlane` folder. Ensure you are in this folder when running commands.

# Run OpenLane
Navigate to `/Desktop/work/tools/openlane_working_dir/openlane`.

To run the Docker container, execute the following command in the terminal:

```bash
  docker
```
To run in interactive mode (step-by-step mode), use the following command:

```bash
bash-4.2$ ./flow.tcl -interactive
```
Note: Running it without interactive mode will execute the complete flow.

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/2.JPG)

Now we need to import all the packages to execute the entire flow using the command:
```bash
% package require openlane 0.9
```
All designs created in OpenLane are extracted from pre-designed projects located in the `designs` folder within the OpenLane directory. For Lab 1, we utilized the picorv32a design.
the rtl file, here verilog file for the project is inside src folder as well as the sdc information.

`config.tcl` is a Tcl script file used to configure various aspects of the ASIC design flow. It includes settings and parameters for technology libraries, design constraints, tool configurations, and other specifications essential for running the design automation flow within OpenLane. Additionally, it sets the filename of another Tcl file located in the folder (`sky130A_sky130_fd_sc_hd_config`). Here is the precedence of how OpenLane prioritizes setting values:

1. Default values of OpenLane
2. `config.tcl`
3. `sky130A_sky130_fd_sc_hd_config` (highest priority)

To prepare the design setup stage, run the following command:
```bash
% prep -design picorv32a
```
![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/3.JPG)

This step merge two lef files cell lef(.lef) and technology lef (.tlef).

This step creates a "runs" folder inside the picorv32a project. Inside the "runs" folder, it generates a subfolder named with today's date and time, for example, "11-07_20-25".

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/4.JPG)

Inside the "runs" folder, there are several empty folders, except for the "tmp" folder where files are generated by merging LEF files.

Additionally, there is a `config.tcl` file inside the created folder that contains all the relevant parameters for the design.

Preparation is complete, and the next step involves synthesis, which is initiated by running this command:
```bash
% run_synthesis
```
This process will take some time. Upon successful completion without errors, it will indicate success.
![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/5.JPG)

In this workshop, for Lab 1, we were required to calculate the flop ratio, which is the number of flip-flops divided by the number of cells used in the design. The flop ratio is 0.1084, or 10.84%.
![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/7.JPG)

# Day 2

This part of the workshop focuses on designing the chip's floorplan. We will set the die and core area, aspect ratio, and utilization factor. We will also place the input-output cells and create the power distribution network and macro placement. Standard cells are not placed at this stage; they will be placed during the placement stage. 

Before running the command to create the floorplan, there are many switches that can be set. These switches are variables detailed in the README file located in the configuration folder of the openlane directory. You can set these switches in the floorplan.tcl file in the same folder. Similar to other sections, this file has the lowest priority. Here is the priority list from lowest to highest:
1. floorplan.tcl
2. config.tcl
3. sky130A_sky130_fd_sc_hd_config (highest priority)

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/8.JPG)

To generate the floorplan, run the following command:
```
% run_floorplan
```
No errors indicate that it was done correctly and the flow successfully specified the floorplan.

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/9.JPG)

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/10.JPG)

The results can be found in the floorplan folder at this address: /Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/11-07_23-11/logs/floorplan.

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/11.JPG)

If we go to the results folder, we can find a DEF file for the project. Opening this file reveals various details, including the die area, which in this case is 660.685um by 671.405um.

![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/12.JPG)

To visualize the actual layout of the floorplan, we can use Magic by running the following command:

```
magic -T /home/vsduser/Desktop/work/tools/openlane_working_dir/pdks/sky130A/libs.tech/magic/sky130A.tech lef read ../../tmp/merged.lef def read picorv32a.floorplan.def &
```
![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/13.JPG)

The next stage after floor planning is the placement stage, which occurs in two phases: global placement and detailed placement. The main objective of global placement is to reduce the wire lengths. To execute this stage, we need to run the following command:
```
run_placement
```
![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/14.JPG)

To visualize the layout after placement, navigate to the placement folder and execute the following command:
```
magic -T /home/vsduser/Desktop/work/tools/openlane_working_dir/pdks/sky130A/libs.tech/magic/sky130A.tech lef read ../../tmp/merged.lef def read picorv32a.placement.def &
```
![App Screenshot](https://github.com/rezaraul/VSD_SOC_DESIGN_AND_PLANNING/blob/main/images/15.JPG)









